<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Products - SecureShop</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        .header { background: #667eea; color: white; padding: 20px; margin: -20px -20px 20px -20px; }
        .products { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .product { border: 1px solid #ddd; padding: 20px; border-radius: 8px; }
        .product h3 { margin-top: 0; }
        .product button { background: #667eea; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }
        .nav { display: flex; gap: 20px; margin-bottom: 20px; }
        .nav a { color: white; text-decoration: none; }
    </style>
</head>
<body>
    <div class="header">
        <h1>SecureShop Products</h1>
        <div class="nav">
            <a href="/">Home</a>
            <a href="/cart">Cart</a>
            <a href="/logout">Logout</a>
        </div>
    </div>
    
    <div class="products">
        <div class="product" th:each="product : ${products}">
            <h3 th:text="${product.name}">Product Name</h3>
            <p th:text="${product.description}">Description</p>
            <p><strong>$<span th:text="${product.price}">0.00</span></strong></p>
            <button class="add-to-cart" th:attr="data-product-id=${product.id}">Add to Cart</button>
        </div>
    </div>
    
    <script>
        document.querySelectorAll('.add-to-cart').forEach(btn => {
            btn.addEventListener('click', function() {
                const productId = this.getAttribute('data-product-id');
                fetch('/cart/add', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'productId=' + productId + '&quantity=1'
                }).then(response => response.text())
                  .then(data => alert('Added to cart!'));
            });
        });
    </script>
</body>
</html>
