<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Checkout</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
        th, td { border: 1px solid black; padding: 8px; text-align: left; }
        form { max-width: 500px; }
        label { display: block; margin-top: 10px; font-weight: bold; }
        input, textarea { width: 100%; padding: 5px; margin-top: 5px; }
        button { margin-top: 20px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
        .error { color: red; margin: 10px 0; }
        .total { font-size: 20px; font-weight: bold; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>Checkout</h1>
    <a href="/cart">Back to Cart</a>
    
    <div class="error" th:if="${error}" th:text="${error}"></div>
    
    <h2>Order Summary</h2>
    <table>
        <tr>
            <th>Product</th>
            <th>Quantity</th>
            <th>Price</th>
        </tr>
        <tr th:each="item : ${cartItems}">
            <td th:text="${item.product.name}"></td>
            <td th:text="${item.quantity}"></td>
            <td th:text="${'$' + (item.product.price * item.quantity)}"></td>
        </tr>
    </table>
    
    <div class="total">Total: $<span th:text="${total}"></span></div>
    
    <h2>Payment Information</h2>
    <form action="/checkout/process" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <input type="hidden" name="clientTotal" th:value="${total}"/>
        
        <label>Card Number:</label>
        <input type="text" name="cardNumber" required placeholder="1234567890123456"/>
        
        <label>Cardholder Name:</label>
        <input type="text" name="cardName" required placeholder="John Doe"/>
        
        <label>Expiry Date:</label>
        <input type="text" name="expiryDate" required placeholder="MM/YY"/>
        
        <label>CVV:</label>
        <input type="text" name="cvv" required placeholder="123"/>
        
        <label>Shipping Address:</label>
        <textarea name="shippingAddress" rows="3" placeholder="123 Main St, City, State, ZIP"></textarea>
        
        <button type="submit">Complete Purchase</button>
    </form>
</body>
</html>
